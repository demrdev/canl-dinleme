<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Testi</title>
    <style>
        body {
            font-family: system-ui;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }
        .test-item {
            margin: 20px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }
        .success { background: rgba(16, 185, 129, 0.3); }
        .error { background: rgba(239, 68, 68, 0.3); }
        h1 { text-align: center; }
    </style>
</head>
<body>
    <h1>üîç Canlƒ± Dinleme Pro - Sistem Testi</h1>
    
    <div id="results"></div>
    
    <script>
        const results = document.getElementById('results');
        
        function addResult(test, success, message) {
            const div = document.createElement('div');
            div.className = `test-item ${success ? 'success' : 'error'}`;
            div.innerHTML = `
                <strong>${success ? '‚úÖ' : '‚ùå'} ${test}:</strong><br>
                ${message}
            `;
            results.appendChild(div);
        }
        
        // Test 1: Browser Compatibility
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            addResult('Tarayƒ±cƒ± Uyumluluƒüu', true, 'WebRTC API destekleniyor');
        } else {
            addResult('Tarayƒ±cƒ± Uyumluluƒüu', false, 'WebRTC API desteklenmiyor');
        }
        
        // Test 2: Audio Context
        try {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const ctx = new AudioContext();
            addResult('Audio Context', true, `Sample Rate: ${ctx.sampleRate}Hz`);
            ctx.close();
        } catch (e) {
            addResult('Audio Context', false, e.message);
        }
        
        // Test 3: HTTPS Check
        if (location.protocol === 'https:' || location.hostname === 'localhost') {
            addResult('HTTPS Kontrol√º', true, 'G√ºvenli baƒülantƒ± mevcut');
        } else {
            addResult('HTTPS Kontrol√º', false, 'HTTPS gerekli (mikrofon eri≈üimi i√ßin)');
        }
        
        // Test 4: Advanced Audio Processor
        if (typeof AdvancedAudioProcessor !== 'undefined') {
            addResult('Geli≈ümi≈ü Ses ƒ∞≈ülemci', true, 'advanced-audio-processor.js y√ºklendi');
        } else {
            addResult('Geli≈ümi≈ü Ses ƒ∞≈ülemci', false, 'advanced-audio-processor.js y√ºklenemedi (fallback kullanƒ±lacak)');
        }
        
        // Test 5: Heartbeat Demo
        if (typeof HeartbeatDetectionDemo !== 'undefined') {
            addResult('Kalp Atƒ±≈üƒ± Demo', true, 'heartbeat-demo.js y√ºklendi');
        } else {
            addResult('Kalp Atƒ±≈üƒ± Demo', false, 'heartbeat-demo.js y√ºklenemedi');
        }
        
        // Test 6: Required Elements
        const requiredElements = [
            'startBtn', 'stopBtn', 'visualizer', 'statusBar',
            'volumeSlider', 'clarityValue', 'distanceValue',
            'directionValue', 'gainValue', 'noiseValue',
            'spectrogram', 'soundMap3D', 'bpmDisplay'
        ];
        
        let missingElements = [];
        requiredElements.forEach(id => {
            if (!document.getElementById(id)) {
                missingElements.push(id);
            }
        });
        
        if (missingElements.length === 0) {
            addResult('HTML Elementleri', true, 'T√ºm gerekli elementler mevcut');
        } else {
            addResult('HTML Elementleri', false, `Eksik elementler: ${missingElements.join(', ')}`);
        }
        
        // Test 7: Local Storage
        try {
            localStorage.setItem('test', 'test');
            localStorage.removeItem('test');
            addResult('Local Storage', true, 'Kullanƒ±labilir');
        } catch (e) {
            addResult('Local Storage', false, 'Kullanƒ±lamƒ±yor');
        }
        
        // Test 8: Service Worker Support
        if ('serviceWorker' in navigator) {
            addResult('Service Worker', true, 'PWA desteƒüi mevcut');
        } else {
            addResult('Service Worker', false, 'PWA desteƒüi yok');
        }
    </script>
    
    <div style="margin-top: 40px; text-align: center; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 10px;">
        <h3>üì± Ana Uygulamaya D√∂n</h3>
        <a href="index.html" style="color: white; font-size: 18px;">‚û°Ô∏è Canlƒ± Dinleme Pro'yu Ba≈ülat</a>
        <br><br>
        <small>GitHub Pages: https://demrdev.github.io/canl-dinleme/</small>
    </div>
</body>
</html>